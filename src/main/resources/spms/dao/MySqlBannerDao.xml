<?xml version="1.0" encoding="UTF-8"?>
<!-- 2. 동적 SQL 적용 -->
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="spms.dao.BannerDao">
	<resultMap type="banner" id="bannerResultMap">
		<id column="BANNER_INDEX" property="index" />
		<result column="BANNER_IMAGE" property="imagePath" />
		<result column="BANNER_VIDEO" property="videoPath" />
	</resultMap>

	<select id="selectList" parameterType="map"
		resultMap="bannerResultMap">
		SELECT BANNER_INDEX,BANNER_IMAGE,BANNER_VIDEO FROM BANNER WHERE BANNER_STATE = 1;
	</select>
	
	<insert id="insert" parameterType="movie">
		INSERT INTO MOVIE (MOVIE_TITLE,MOVIE_DIRECTOR,MOVIE_ACTOR,MOVIE_GENRE,MOVIE_LIMIT_AGE,MOVIE_RUNNING_TIME,MOVIE_OPEN_DATE,MOVIE_END_DATE,MOVIE_POSTER,MOVIE_INFO,MOVIE_TAGS,MOVIE_STATE)
		VALUES(#{title},#{director},#{actor},#{genre},#{limitAge},#{runningTime},#{openDate},#{endDate},#{poster},#{info},#{tags},1)
	</insert>
	
	<select id="selectOne" parameterType="int"
		resultMap="bannerResultMap">
		SELECT MOVIE_INDEX,MOVIE_TITLE,MOVIE_DIRECTOR,MOVIE_ACTOR,MOVIE_GENRE,MOVIE_LIMIT_AGE,MOVIE_RUNNING_TIME,MOVIE_OPEN_DATE,MOVIE_END_DATE,MOVIE_POSTER,MOVIE_INFO,MOVIE_TAGS,MOVIE_STATE
		FROM MOVIE
		WHERE MOVIE_INDEX=#{value}
	</select>
	
	<update id="update" parameterType="map">
		UPDATE MOVIE
		<set>
			<if test="title != null">MOVIE_TITLE=#{title},</if>
			<if test="director != null">MOVIE_DIRECTOR=#{director},</if>
			<if test="actor != null">MOVIE_ACTOR=#{actor},</if>
			<if test="genre != null">MOVIE_GENRE=#{genre},</if>
			<if test="limitAge != null">MOVIE_LIMIT_AGE=#{limitAge},</if>
			<if test="genre != null">MOVIE_RUNNING_TIME=#{genre},</if>
			<if test="openDate != null">MOVIE_OPEN_DATE=#{openDate},</if>
			<if test="endDate != null">MOVIE_END_DATE=#{endDate},</if>
			<if test="poster != null">MOVIE_POSTER=#{poster},</if>
			<if test="info != null">MOVIE_INFO=#{info},</if>
			<if test="tags != null">MOVIE_TAGS=#{tags},</if>
			<if test="state != null">MOVIE_STATE=#{state},</if>
		</set>
		WHERE MOVIE_INDEX=#{index}
	</update>
</mapper>